// Generated by EmberScript 0.0.7
function in$(e,t){for(var n=0,r=t.length;n<r;++n)if(n in t&&t[n]===e)return!0;return!1}var get$=Ember.get;Em.onLoad("Ember.Application",function(e){return e.initializer({name:"ember-auth.module.action-redirectable",before:"ember-auth-load",initialize:function(e,t){return t.register("authModule:actionRedirectable",get$(get$(Em,"Auth"),"ActionRedirectableAuthModule"),{singleton:!0}),t.inject("authModule:actionRedirectable","auth","auth:main"),t.inject("authModule:actionRedirectable","router","router:main"),get$(Em,"Route").reopen({beforeModel:function(e,t){return null==t&&(t=e),get$(get$(get$(this,"auth"),"module"),"actionRedirectable").registerRedirect(t),this._super.apply(this,arguments)}})}}),e.initializer({name:"ember-auth.module.action-redirectable-load",after:"ember-auth-load",initialize:function(e,t){return e.lookup("authModule:actionRedirectable")}})});var get$=Ember.get,set$=Ember.set;set$(get$(Em,"Auth"),"ActionRedirectableAuthModule",Ember.Object.extend({init:function(){return get$(this,"auth")._config("actionRedirectable",get$(this,"_defaultConfig")),null!=get$(this,"config")||set$(this,"config",get$(this,"auth")._config("actionRedirectable")),get$(this,"auth").addHandler("signInSuccess",get$(this,"redirect").bind(this)),get$(this,"auth").addHandler("signOutSuccess",get$(this,"redirect").bind(this))},_defaultConfig:{signInRoute:!1,signOutRoute:!1,signInSmart:!1,signOutSmart:!1,signInBlacklist:[],signOutBlacklist:[]},signInRedir:null,signOutRedir:null,registerRedirect:function(e){var t;t=this.canonicalizeRoute(get$(e,"targetName")),in$(t,this.getBlacklist("signIn"))||set$(this,"signInRedir",e);if(!in$(t,this.getBlacklist("signOut")))return set$(this,"signOutRedir",e)},canonicalizeRoute:function(e){var t;return typeof e!="string"?"":(t=function(e,t){var n;return n=get$(e,"length")-get$(t,"length"),n>=0&&e.lastIndexOf(t)===n},t(e,".index")?e.substr(0,e.lastIndexOf(".index")):e)},getBlacklist:function(e){var t;return(t=get$(this,"config")[""+e+"Blacklist"])?function(e){var n;for(var r=0,i=t.length;r<i;++r)n=t[r],e.push(this.canonicalizeRoute(n));return e}.call(this,[]):[]},resolveRedirect:function(e){var t,n;return e!=="signIn"&&e!=="signOut"?null:(n=get$(this,"config")[""+e+"Smart"],t=this.canonicalizeRoute(get$(this,"config")[""+e+"Route"]),t?n?this.get(""+e+"Redir")||t:t:null)},redirect:function(){var e,t;e=get$(get$(this,"auth"),"signedIn")?"signIn":"signOut";if(!(t=this.resolveRedirect(e)))return;switch(typeof t){case"object":return t.retry();case"string":return get$(this,"router").transitionTo(t)}}}));